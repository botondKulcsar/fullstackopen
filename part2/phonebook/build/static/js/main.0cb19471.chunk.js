(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var r=t(17),a=t.n(r),u=t(8),c=t(3),o=t(2),i=t(4),d=t.n(i),b="/api/persons",s=function(){return d.a.get(b).then((function(e){return e.data}))},j=function(e){return d.a.post(b,e).then((function(e){return e.data}))},l=function(e){return d.a.delete(b+"/"+e).then((function(e){return e.data}))},m=function(e,n){return d.a.put(b+"/"+e,n).then((function(e){return e.data}))},f=t(0),h=function(e){var n=e.name;return Object(f.jsxs)("div",{style:{borderStyle:"solid",borderColor:"green",color:"green",borderRadius:5,padding:5,background:"lightgrey",marginBottom:10},children:["Added ",n]})},O=function(e){var n=e.name;return Object(f.jsxs)("div",{style:{borderStyle:"solid",borderColor:"red",color:"red",borderRadius:5,padding:5,background:"lightgrey",marginBottom:10},children:["Information of ",n," has already been removed from server"]})},v=function(e){var n=e.value,t=e.onChange;return Object(f.jsxs)("div",{children:["filter shown with",Object(f.jsx)("input",{value:n,onChange:t})]})},g=function(e){var n=e.handleSubmit,t=e.newName,r=e.handleNameChange,a=e.newNumber,u=e.handleNumberChange;return Object(f.jsxs)("form",{onSubmit:n,children:[Object(f.jsxs)("div",{children:["name:",Object(f.jsx)("input",{value:t,onChange:r})]}),Object(f.jsxs)("div",{children:["number:",Object(f.jsx)("input",{value:a,onChange:u})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var n=e.name,t=e.number,r=e.remove;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("p",{children:[n," ",t," ",Object(f.jsx)("button",{onClick:r,children:"delete"})]})})},p=function(e){var n=e.persons,t=e.filter,r=e.visible,a=e.remove,u=n.map((function(e){return Object(f.jsx)(x,{name:e.name,number:e.number,remove:function(){return a(e.id)}},e.name)}));return Object(f.jsx)(f.Fragment,{children:t?r:u})},w=function(){var e=Object(o.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),i=Object(c.a)(a,2),d=i[0],b=i[1],w=Object(o.useState)(""),C=Object(c.a)(w,2),S=C[0],y=C[1],k=Object(o.useState)(""),N=Object(c.a)(k,2),B=N[0],T=N[1],D=Object(o.useState)(null),E=Object(c.a)(D,2),F=E[0],I=E[1],J=Object(o.useState)(null),L=Object(c.a)(J,2),R=L[0],A=L[1];Object(o.useEffect)((function(){s().then((function(e){r(e)}))}),[]);var P=Object(o.useState)([]),q=Object(c.a)(P,2),z=q[0],G=q[1];return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),F&&Object(f.jsx)(h,{name:F}),R&&Object(f.jsx)(O,{name:R}),Object(f.jsx)(v,{value:B,onChange:function(e){var n=e.target.value.toLowerCase();T(n);var r=t.filter((function(e){return e.name.toLowerCase().includes(n)})).map((function(e){return Object(f.jsx)(x,{name:e.name,number:e.number},e.name)}));G(r)}}),Object(f.jsx)("h3",{children:"add a new"}),Object(f.jsx)(g,{handleSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===d}));if(n){if(window.confirm("".concat(d," is already added to phonebook, replace the old number with the new one?"))){var a=Object(u.a)(Object(u.a)({},n),{},{number:S});m(n.id,a).then((function(e){r(t.map((function(n){return n.id===e.id?e:n}))),I(e.name),setTimeout((function(){return I(!1)}),5e3),b(""),y("")})).catch((function(e){A(d),b(""),y(""),setTimeout((function(){return A(null)}),5e3),r(t.filter((function(e){return e.id!==n.id})))}))}}else j({name:d,number:S}).then((function(e){r(t.concat(e)),I(e.name),setTimeout((function(){return I(!1)}),5e3),b(""),y("")}))},newName:d,handleNameChange:function(e){return b(e.target.value)},newNumber:S,handleNumberChange:function(e){return y(e.target.value)}}),Object(f.jsx)("h3",{children:"Numbers"}),Object(f.jsx)(p,{persons:t,filter:B,visible:z,remove:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&l(e).then((function(n){r(t.filter((function(n){return n.id!==e})))}))}})]})};a.a.render(Object(f.jsx)(w,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.0cb19471.chunk.js.map